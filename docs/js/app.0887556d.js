(function(){"use strict";var t={9175:function(t,e,i){var s=i(5130),n=i(6768);const l={class:"center"},a={class:"wrap"};function r(t,e,i,s,r,o){const u=(0,n.g2)("InsituVizApp");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",a,[(0,n.bF)(u,{title:"Single",src:"data/single/data.csv"}),(0,n.bF)(u,{title:"CameraPath",src:"data/CameraPath/data.csv"}),(0,n.bF)(u,{title:"CameraFocus",src:"data/CameraFocus/data.csv"}),(0,n.bF)(u,{title:"Multi",src:"data/multi/data.csv"})])])}var o=i(4232);const u=t=>((0,n.Qi)("data-v-2d48b062"),t=t(),(0,n.jt)(),t),h={class:"component"},m=["src"],f={class:"yoko"},d=u((()=>(0,n.Lk)("p",{class:"txt"},"Time",-1))),p=["max","value"],c={class:"txt"},v={key:0},g=u((()=>(0,n.Lk)("br",null,null,-1))),x={class:"yoko"},b=u((()=>(0,n.Lk)("p",{class:"txt"},"Frame",-1))),k=["max"],y={class:"txt"};function M(t,e,i,l,a,r){return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("h1",null,(0,o.v_)(i.title),1),(0,n.Lk)("div",null,[(0,n.Lk)("img",{src:r.files(a.tmslider),onMousemove:e[0]||(e[0]=(...t)=>r.imgMouseMove&&r.imgMouseMove(...t)),onMousedown:e[1]||(e[1]=(...t)=>r.imgMouseDown&&r.imgMouseDown(...t)),onMouseup:e[2]||(e[2]=(...t)=>r.imgMouseUp&&r.imgMouseUp(...t)),onContextmenu:e[3]||(e[3]=t=>{t.preventDefault()}),class:"imagecomp"},null,40,m)]),(0,n.Lk)("div",null,[(0,n.Lk)("div",f,[d,(0,n.Lk)("progress",{id:"prog",max:a.maxtime,value:r.times(a.tmslider),class:"slider"},null,8,p),(0,n.Lk)("p",c,(0,o.v_)(r.times(a.tmslider)),1),a.multifiles.length>0?((0,n.uX)(),(0,n.CE)("p",v,[(0,n.eW)("phi="+(0,o.v_)(a.multifiles[a.tmslider].data[a.rotindex].phi)+" ",1),g,(0,n.eW)(" theta="+(0,o.v_)(a.multifiles[a.tmslider].data[a.rotindex].theta),1)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",x,[b,(0,n.bo)((0,n.Lk)("input",{type:"range",max:r.datum.length-1,step:"1","onUpdate:modelValue":e[4]||(e[4]=t=>a.tmslider=t),class:"slider"},null,8,k),[[s.Jo,a.tmslider]]),(0,n.Lk)("p",y,(0,o.v_)(a.tmslider),1),(0,n.Lk)("button",{class:"btn",onClick:e[5]||(e[5]=(...t)=>r.playbutton&&r.playbutton(...t))},(0,o.v_)(a.pbutton),1),(0,n.Lk)("button",{class:"btn",onClick:e[6]||(e[6]=(...t)=>r.speedbutton&&r.speedbutton(...t))},"x"+(0,o.v_)(a.speed),1)])])])}i(4114);var w={name:"InsituViz",props:{title:String,src:String},data(){return{tmslider:0,rotindex:0,singlefiles:[],multifiles:[],maxtime:0,pbutton:"Play",timeid:null,speed:1,mousedrag:!1}},computed:{datum(){return this.multifiles.length>0?this.multifiles:this.singlefiles.length>0?this.singlefiles:[]}},methods:{init(){this.singlefiles.length=0,this.multifiles.length=0,this.maxtime=0,this.mousedrag=!1},files(t){return this.multifiles.length>0?this.multifiles[t].data[this.rotindex].file:this.singlefiles.length>0?this.singlefiles[t].file:""},times(t){return this.multifiles.length>0?this.multifiles[t].time:this.singlefiles.length>0?this.singlefiles[t].time:0},loadData(t){var e=t.split("/"),i=e.slice(0,e.length-1).join("/");fetch(t).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.text()})).then((t=>{const e=t.indexOf("\n"),s=t.slice(0,e),n=s.split(","),l=t.slice(e+1),a=l.split("\n"),r=a.map((t=>t.split(",")));var o,u;if(3==n.length)for(o in r)r[o][0]&&r[o][2]&&(u=0|parseInt(r[o][0]),this.singlefiles.push({time:u,file:i+"/"+r[o][2]}),this.maxtime=Math.max(this.maxtime,u));else for(o in r)if(r[o][0]&&r[o][5]){u=0|parseInt(r[o][0]);var h=0|parseInt(r[o][1]);h<this.multifiles.length?this.multifiles[h].data.push({theta:parseInt(r[o][3]),phi:parseInt(r[o][4]),file:i+"/"+r[o][5]}):(this.multifiles.push({time:u,data:[]}),this.multifiles[h].data.push({theta:parseInt(r[o][3]),phi:parseInt(r[o][4]),file:i+"/"+r[o][5]}),this.maxtime=Math.max(this.maxtime,u))}console.log("max time:"+this.maxtime)})).catch((t=>{console.error("There was a problem with the fetch operation:",t)}))},playbutton(){null==this.timeid?(this.pbutton="Stop",this.play()):(this.pause(),this.pbutton="Play")},speedbutton(){var t=[1,2,4,8,16,32,64],e=0;t.push(t[0]);while(this.speed!=t[e])e++;this.speed=t[e+1],null!=this.timeid&&this.play()},play(){null==this.timeid?this.timeid=setInterval((()=>{var t=parseInt(this.tmslider)+1;t>this.datum.length-1&&(t=0),this.tmslider=t}),1e3/this.speed):(this.pause(),this.play())},pause(){null!=this.timeid&&(clearInterval(this.timeid),this.timeid=null)},nextRotfile(t,e){var i=this.multifiles[this.tmslider].data,s=[],n=[];for(var l in i)s.indexOf(i[l].phi)<0&&s.push(i[l].phi),n.indexOf(i[l].theta)<0&&n.push(i[l].theta);s.sort(((t,e)=>t<e)),n.sort(((t,e)=>t<e));var a=i[this.rotindex].phi,r=i[this.rotindex].theta,o=s.indexOf(a),u=n.indexOf(r),h=0;while(h<5){o+=t,u+=e,o>=s.length?o=0:o<0&&(o=s.length-1),u>=n.length?u=0:u<0&&(u=n.length-1);var m=i.findIndex((t=>t.phi==s[o]&&t.theta==n[u]));if(m>=0){this.rotindex=m;break}h++}return this.rotindex},imgMouseMove(t){if(0!=this.multifiles.length&&this.mousedrag){var e=t.offsetX-this.mx,i=t.offsetY-this.my,s=!1;Math.abs(e)>20&&(this.rotindex=this.nextRotfile(Math.sign(i),0),s=!0),Math.abs(i)>20&&(this.rotindex=this.nextRotfile(0,-Math.sign(i)),s=!0),s&&(this.mx=t.offsetX,this.my=t.offsetY)}},imgMouseDown(t){this.mousedrag=!0,this.mx=t.offsetX,this.my=t.offsetY,t.preventDefault()},imgMouseUp(t){this.mousedrag=!1,t.preventDefault()}},mounted(){this.init(),console.log("load insitu csv:"+this.src),this.loadData(this.src)}},L=i(1241);const O=(0,L.A)(w,[["render",M],["__scopeId","data-v-2d48b062"]]);var I=O,_={name:"App",components:{InsituVizApp:I}};const C=(0,L.A)(_,[["render",r]]);var j=C;(0,s.Ef)(j).mount("#app")}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var l=e[s]={exports:{}};return t[s].call(l.exports,l,l.exports,i),l.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,l){if(!s){var a=1/0;for(h=0;h<t.length;h++){s=t[h][0],n=t[h][1],l=t[h][2];for(var r=!0,o=0;o<s.length;o++)(!1&l||a>=l)&&Object.keys(i.O).every((function(t){return i.O[t](s[o])}))?s.splice(o--,1):(r=!1,l<a&&(a=l));if(r){t.splice(h--,1);var u=n();void 0!==u&&(e=u)}}return e}l=l||0;for(var h=t.length;h>0&&t[h-1][2]>l;h--)t[h]=t[h-1];t[h]=[s,n,l]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,l,a=s[0],r=s[1],o=s[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(o)var h=o(i)}for(e&&e(s);u<a.length;u++)l=a[u],i.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return i.O(h)},s=self["webpackChunkinsitu_viz"]=self["webpackChunkinsitu_viz"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(9175)}));s=i.O(s)})();
//# sourceMappingURL=app.0887556d.js.map